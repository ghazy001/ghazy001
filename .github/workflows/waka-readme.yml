name: ğŸ•’ Update WakaTime Stats

# Required so the action can commit back to the repo
permissions:
  contents: write

on:
  schedule:
    - cron: "30 3 * * *"   # daily at 03:30 UTC (safe after aggregation)
  workflow_dispatch: {}

concurrency:
  group: waka-readme
  cancel-in-progress: true

jobs:
  update-readme:
    name: WakaReadme DevMetrics
    runs-on: ubuntu-latest
    steps:
      - uses: athul/waka-readme@master
        with:
          # ğŸ” Required
          WAKATIME_API_KEY: ${{ secrets.WAKATIME_API_KEY }}

          # ğŸ“ If this is NOT your profile repo, also pass a PAT with contents:write
          # GH_TOKEN: ${{ secrets.GH_TOKEN }}

          # ğŸ“ If you're updating a non-profile repo, set the exact target
          # REPOSITORY: ghazi-saoudi/some-repo
          # TARGET_BRANCH: main
          # TARGET_PATH: README.md

          # ğŸ§© Content
          SHOW_TITLE: true
          SECTION_NAME: waka
          TIME_RANGE: last_30_days       # switch to last_7_days whenever you prefer
          SHOW_TIME: true
          SHOW_TOTAL: true
          LANG_COUNT: 7
          BLOCKS: "â–‘â–’â–“â–ˆ"

          # ğŸ“ Commit meta (optional but nice)
          COMMIT_MESSAGE: "ğŸ”„ Updated WakaTime graph with new metrics"
          # COMMITTER_NAME: "GitHubActionBot"
          # COMMITTER_EMAIL: "action-bot@github.com"
